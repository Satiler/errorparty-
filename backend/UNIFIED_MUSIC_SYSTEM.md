# Unified Music System - –£–ª—É—á—à–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—Ä–µ–∫–æ–≤

## üéØ –û–±–∑–æ—Ä

–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –º—É–∑—ã–∫–∏, –≤–∫–ª—é—á–∞—é—â–∞—è:
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏**: KissVK, Musify, Hitmo, Promo–îJ
- **–£–º–Ω–æ–µ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–≥—Ä—É–∑–æ–∫**: Retry, –≤–∞–ª–∏–¥–∞—Ü–∏—è, –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π API**: –ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Unified Music System                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îÇ
‚îÇ  ‚îÇ Multi-Decoder‚îÇ  ‚îÇDownload Mgr  ‚îÇ            ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ
‚îÇ                                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ  ‚îÇ KissVK   ‚îÇ ‚îÇ Musify  ‚îÇ ‚îÇ Hitmo  ‚îÇ ‚îÇPromo–îJ‚îÇ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îÇ                                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üì¶ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. **Multi-Decoder** (`src/utils/multi-decoder.js`)

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –¥–µ–∫–æ–¥–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤:

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–µ—Ç–æ–¥—ã:**
- KissVK CryptoJS-compatible (AES-256-CBC)
- KissVK AES-128-CBC
- KissVK AES-192-CBC
- VK Base64
- –ü—Ä—è–º—ã–µ URL (Hitmo, Musify, Promo–îJ)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```javascript
const { getInstance } = require('./src/utils/multi-decoder');
const decoder = getInstance();

const result = await decoder.decode(encryptedUrl, 'kissvk');
// result = { success: true, url: 'https://...', method: 'kissvk-cryptojs' }
```

**API:**
```javascript
// –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–¥–Ω–æ–≥–æ URL
decoder.decode(encodedData, source = 'auto')

// Batch –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
decoder.decodeMany(encodedDataArray, source = 'auto')
```

---

### 2. **Download Manager** (`src/services/download-manager.service.js`)

–ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–≥—Ä—É–∑–æ–∫ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏:

**–§—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ Retry —Å exponential backoff (–¥–æ 3 –ø–æ–ø—ã—Ç–æ–∫)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è MP3 —Ñ–∞–π–ª–æ–≤ (magic bytes)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ (–º–∏–Ω 100KB, –º–∞–∫—Å 50MB)
- ‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–æ–∫
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∑–æ–∫

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```javascript
const { getInstance } = require('./src/services/download-manager.service');
const downloadManager = getInstance();

const result = await downloadManager.downloadTrack({
  trackId: '12345',
  streamUrl: 'https://...',
  title: 'Song Title',
  artist: 'Artist Name',
  source: 'kissvk'
});

// result = {
//   success: true,
//   filePath: '/uploads/music/Artist - Song_abc123.mp3',
//   fileSize: 4567890,
//   downloadedAt: Date
// }
```

**–ú–∞—Å—Å–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞:**
```javascript
const results = await downloadManager.downloadMany(tracks, concurrency = 3);
```

---

### 3. **Unified Music Service** (`src/services/unified-music.service.js`)

–ï–¥–∏–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ –≤—Å–µ–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏:

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**

#### `searchAllSources(query, options)`
–ü–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º —Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º:

```javascript
const result = await unifiedMusic.searchAllSources('Miyagi', {
  limit: 20,
  sources: ['kissvk', 'musify', 'hitmo'],
  includeStreamUrl: true,
  downloadTracks: false
});

// result = {
//   query: 'Miyagi',
//   sources: [
//     { source: 'kissvk', tracks: [...], count: 15, success: true },
//     { source: 'musify', tracks: [...], count: 10, success: true }
//   ],
//   totalTracks: 25,
//   allTracks: [...] // –¥–µ–¥—É–ø–ª–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
// }
```

#### `smartSearch(query, options)`
–£–º–Ω—ã–π –ø–æ–∏—Å–∫ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:

```javascript
const result = await unifiedMusic.smartSearch('–°–∫—Ä–∏–ø—Ç–æ–Ω–∏—Ç', {
  minResults: 10,
  maxSources: 3
});

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–±—É–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
// –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ minResults
```

#### `getTopTracks(options)`
–¢–æ–ø —Ç—Ä–µ–∫–∏ —Å–æ –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:

```javascript
const result = await unifiedMusic.getTopTracks({
  limit: 50,
  sources: ['kissvk', 'musify']
});
```

---

## üöÄ API Endpoints

### –ü–æ–∏—Å–∫

**GET** `/api/music/unified/search`
```bash
# –ü–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º
curl "http://localhost:3000/api/music/unified/search?q=Miyagi&limit=20"

# –¢–æ–ª—å–∫–æ KissVK –∏ Musify
curl "http://localhost:3000/api/music/unified/search?q=Miyagi&sources=kissvk,musify"
```

**GET** `/api/music/unified/smart-search`
```bash
# –£–º–Ω—ã–π –ø–æ–∏—Å–∫ (–∞–≤—Ç–æ–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤)
curl "http://localhost:3000/api/music/unified/smart-search?q=–°–∫—Ä–∏–ø—Ç–æ–Ω–∏—Ç&minResults=10"
```

### –¢–æ–ø —Ç—Ä–µ–∫–∏

**GET** `/api/music/unified/top`
```bash
curl "http://localhost:3000/api/music/unified/top?limit=50"
```

### –ó–∞–≥—Ä—É–∑–∫–∞ —Ç—Ä–µ–∫–æ–≤

**POST** `/api/music/unified/download`
```bash
curl -X POST http://localhost:3000/api/music/unified/download \
  -H "Content-Type: application/json" \
  -d '{
    "tracks": [
      {
        "trackId": "123",
        "streamUrl": "https://...",
        "title": "Song",
        "artist": "Artist",
        "source": "kissvk"
      }
    ],
    "concurrency": 3
  }'
```

### –ò–º–ø–æ—Ä—Ç –≤ –ë–î

**POST** `/api/music/unified/import`
```bash
curl -X POST http://localhost:3000/api/music/unified/import \
  -H "Content-Type: application/json" \
  -d '{
    "tracks": [...],
    "createAlbum": true,
    "albumTitle": "Best Hits",
    "albumArtist": "Various Artists"
  }'
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**GET** `/api/music/unified/stats`
```bash
curl "http://localhost:3000/api/music/unified/stats"
```

**GET** `/api/music/unified/sources`
```bash
# –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
curl "http://localhost:3000/api/music/unified/sources"
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞
```bash
cd backend
node test-unified-music-system.js
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞
```
üéµ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï UNIFIED MUSIC SYSTEM
============================================================

üìå –¢–ï–°–¢ 1: –ü–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º
  kissvk: 15 —Ç—Ä–µ–∫–æ–≤ ‚úì
  musify: 10 —Ç—Ä–µ–∫–æ–≤ ‚úì
  hitmo: 8 —Ç—Ä–µ–∫–æ–≤ ‚úì

üìå –¢–ï–°–¢ 2: –£–º–Ω—ã–π –ø–æ–∏—Å–∫
  –ù–∞–π–¥–µ–Ω–æ: 12 —Ç—Ä–µ–∫–æ–≤
  –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤: 2

üìå –¢–ï–°–¢ 3: –¢–æ–ø —Ç—Ä–µ–∫–∏
  –í—Å–µ–≥–æ: 50 —Ç—Ä–µ–∫–æ–≤

üìå –¢–ï–°–¢ 4: –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
  –ú–µ—Ç–æ–¥: kissvk-cryptojs
  –°—Ç–∞—Ç—É—Å: ‚úì –£—Å–ø–µ—à–Ω–æ

üìå –¢–ï–°–¢ 5: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  –í—Å–µ–≥–æ –ø–æ–∏—Å–∫–æ–≤: 3
  –£—Å–ø–µ—à–Ω—ã—Ö: 3
  –¢—Ä–µ–∫–æ–≤ –ø–æ–ª—É—á–µ–Ω–æ: 75

‚úÖ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û –£–°–ü–ï–®–ù–û
```

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ–∏—Å–∫ –∏ –∑–∞–≥—Ä—É–∑–∫–∞

```javascript
const { getInstance } = require('./src/services/unified-music.service');
const unifiedMusic = getInstance();

// –ü–æ–∏—Å–∫
const searchResult = await unifiedMusic.smartSearch('Miyagi', {
  minResults: 5
});

// –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ç—Ä–µ–∫–æ–≤
const downloadedTracks = await unifiedMusic.downloadTracks(
  searchResult.tracks.slice(0, 3),
  concurrency = 3
);

console.log(`–ó–∞–≥—Ä—É–∂–µ–Ω–æ: ${downloadedTracks.filter(t => t.downloaded).length}`);
```

### –ü—Ä–∏–º–µ—Ä 2: –ò–º–ø–æ—Ä—Ç –∞–ª—å–±–æ–º–∞

```javascript
// 1. –ù–∞–π—Ç–∏ —Ç—Ä–µ–∫–∏ –∞–ª—å–±–æ–º–∞
const result = await unifiedMusic.searchAllSources('–°–∫—Ä–∏–ø—Ç–æ–Ω–∏—Ç –£–†–û–ë–û–†–û–°');

// 2. –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å URL
const tracksWithUrls = result.allTracks.filter(t => t.isDecrypted);

// 3. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç—Ä–µ–∫–∏
const downloaded = await unifiedMusic.downloadTracks(tracksWithUrls);

// 4. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –ë–î —á–µ—Ä–µ–∑ API
// POST /api/music/unified/import
```

### –ü—Ä–∏–º–µ—Ä 3: –ú—É–ª—å—Ç–∏-–∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤—ã–π –ø–ª–µ–π–ª–∏—Å—Ç

```javascript
// –°–æ–±–∏—Ä–∞–µ–º —Ç–æ–ø —Ç—Ä–µ–∫–∏ —Å —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
const topKissVK = await unifiedMusic.getTopTracks({ 
  sources: ['kissvk'], 
  limit: 20 
});

const topMusify = await unifiedMusic.getTopTracks({ 
  sources: ['musify'], 
  limit: 20 
});

// –û–±—ä–µ–¥–∏–Ω—è–µ–º –∏ –¥–µ–¥—É–ø–ª–∏—Ü–∏—Ä—É–µ–º
const allTop = unifiedMusic.mergeAndDeduplicate([
  { source: 'kissvk', tracks: topKissVK.tracks },
  { source: 'musify', tracks: topMusify.tracks }
]);

console.log(`–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–∫–æ–≤: ${allTop.length}`);
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∑–∞–≥—Ä—É–∑–æ–∫
MUSIC_DOWNLOAD_DIR=./uploads/music

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Download Manager
DOWNLOAD_MAX_RETRIES=3
DOWNLOAD_TIMEOUT=60000
DOWNLOAD_MIN_FILE_SIZE=102400
DOWNLOAD_MAX_FILE_SIZE=52428800

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ KissVK
KISSVK_CACHE_TTL=3600000
KISSVK_REQUEST_DELAY=1000
KISSVK_MAX_CONCURRENT=2
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

–ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ `unified-music.service.js`:

```javascript
this.sourcePriority = ['kissvk', 'musify', 'hitmo', 'promodj'];
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Unified Music
```javascript
const stats = unifiedMusic.getStats();

// {
//   searches: 10,
//   successful: 9,
//   failed: 1,
//   bySource: {
//     kissvk: { requests: 5, successful: 5, totalTracks: 75 },
//     musify: { requests: 3, successful: 3, totalTracks: 45 }
//   },
//   downloadManagerStats: {
//     downloads: 15,
//     successful: 14,
//     successRate: '93.33%',
//     totalSize: '45.6 MB'
//   }
// }
```

---

## üîß Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ –¥–µ–∫–æ–¥–∏—Ä—É—é—Ç—Å—è URL KissVK

**–†–µ—à–µ–Ω–∏–µ:**
Multi-Decoder –ø—Ä–æ–±—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:
```bash
[MultiDecoder] Method 1: kissvk-cryptojs...
[MultiDecoder] ‚úì Decoded with kissvk-cryptojs
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ó–∞–≥—Ä—É–∑–∫–∞ –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π

**–†–µ—à–µ–Ω–∏–µ:**
Download Manager –¥–µ–ª–∞–µ—Ç 3 retry. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
- –í–∞–ª–∏–¥–Ω–æ—Å—Ç—å URL
- –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (100KB - 50MB)
- MP3 magic bytes

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `smartSearch` –¥–ª—è –∞–≤—Ç–æ–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É: `/api/music/unified/stats`

---

## üöÄ Production Ready

### Checklist
- ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ Retry –º–µ—Ö–∞–Ω–∏–∑–º —Å exponential backoff
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ (MP3 magic bytes)
- ‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ Rate limiting
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- ‚úÖ Error handling
- ‚úÖ –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —Ç—Ä–µ–∫–æ–≤
- ‚úÖ Unified API

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–∏–º–∏—Ç—ã rate limiting
3. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
4. –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞—Ç—å –∫–µ—à
5. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `smartSearch` –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `src/utils/multi-decoder.js` - –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- `src/services/download-manager.service.js` - –ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–≥—Ä—É–∑–æ–∫
- `src/services/unified-music.service.js` - –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å
- `src/controllers/unified-music.controller.js` - API –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
- `src/modules/music/unified-music.routes.js` - –ú–∞—Ä—à—Ä—É—Ç—ã
- `test-unified-music-system.js` - –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç

---

## üìù Changelog

### v1.0.0 (2025-12-25)
- ‚úÖ –°–æ–∑–¥–∞–Ω Multi-Decoder —Å 5+ –∞–ª–≥–æ—Ä–∏—Ç–º–∞–º–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω Download Manager —Å retry –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω Unified Music Service
- ‚úÖ –°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω—ã–π REST API
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å KissVK, Musify, Hitmo, Promo–îJ

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ**
