# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Lmusic.kz

## –û–ø–∏—Å–∞–Ω–∏–µ

–ú–æ–¥—É–ª—å –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ –∏–º–ø–æ—Ä—Ç–∞ –º—É–∑—ã–∫–∏ —Å —Å–∞–π—Ç–∞ **lmusic.kz** - –∫–∞–∑–∞—Ö—Å—Ç–∞–Ω—Å–∫–æ–≥–æ –º—É–∑—ã–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä—Ç–∞–ª–∞ —Å –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π —Ä—É—Å—Å–∫–æ–π –∏ –∫–∞–∑–∞—Ö—Å–∫–æ–π –º—É–∑—ã–∫–æ–π –≤ –≤—ã—Å–æ–∫–æ–º –∫–∞—á–µ—Å—Ç–≤–µ MP3.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üéµ **–ü—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ MP3** - –≥–æ—Ç–æ–≤—ã–µ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- üîç **–ü–∞—Ä—Å–∏–Ω–≥ –ø–æ –∂–∞–Ω—Ä–∞–º** - –ø–æ–ø, —Ä–æ–∫, —Ä—ç–ø, —à–∞–Ω—Å–æ–Ω, —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –∏ —Ç.–¥.
- üåç **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å** - —Ä—É—Å—Å–∫–∞—è –∏ –∫–∞–∑–∞—Ö—Å–∫–∞—è –º—É–∑—ã–∫–∞
- üì• **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç** - –º–∞—Å—Å–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ç—Ä–µ–∫–æ–≤
- üé® **–û–±–ª–æ–∂–∫–∏ –∞–ª—å–±–æ–º–æ–≤** - –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- üîé **–ü–æ–∏—Å–∫** - –Ω–∞—Ö–æ–¥–∏—Ç —Ç—Ä–µ–∫–∏ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é/–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é
- ‚ö° **–ë–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏** - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è API –∫–ª—é—á

## üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –∂–∞–Ω—Ä—ã

| –ñ–∞–Ω—Ä | ID | –Ø–∑—ã–∫–∏ |
|------|-------|-------|
| –ü–æ–ø | `pop-music` | rus, kz |
| –†–æ–∫ | `rock` | rus, kz |
| –†—ç–ø | `rap` | rus, kz |
| –®–∞–Ω—Å–æ–Ω | `chanson` | rus, kz |
| –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è | `electronic` | rus, kz |
| –¢–∞–Ω—Ü–µ–≤–∞–ª—å–Ω–∞—è | `dance` | rus, kz |
| –ù–∞—Ä–æ–¥–Ω–∞—è | `folk` | rus, kz |

## üöÄ API Endpoints

### –°–ø–∏—Å–æ–∫ –∂–∞–Ω—Ä–æ–≤
```http
GET /api/music/lmusic/genres
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "genres": [
    {
      "id": "pop-music",
      "name": "–ü–æ–ø",
      "languages": ["rus", "kz"]
    }
  ]
}
```

### –¢—Ä–µ–∫–∏ –∏–∑ –∂–∞–Ω—Ä–∞
```http
GET /api/music/lmusic/genre/:genre?language=rus&page=1
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `genre` - ID –∂–∞–Ω—Ä–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `language` - —è–∑—ã–∫: `rus` –∏–ª–∏ `kz` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `rus`)
- `page` - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `1`)

**–ü—Ä–∏–º–µ—Ä:**
```http
GET /api/music/lmusic/genre/pop-music?language=rus&page=1
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "count": 20,
  "genre": "pop-music",
  "language": "rus",
  "page": 1,
  "tracks": [
    {
      "id": "275171",
      "title": "–ó–∞–±—ã–≤–∞—é",
      "artist": "–ù–∞–¥–µ–∂–¥–∞ –ü—Ä–∏–¥—ë—Ç & Eleyseee",
      "duration": 180,
      "coverUrl": "https://lmusic.kz/images/cover/...",
      "downloadUrl": "https://lmusic.kz/api/download/275171",
      "streamUrl": "https://lmusic.kz/api/download/275171",
      "pageUrl": "https://lmusic.kz/mp3/...",
      "source": "lmusic.kz"
    }
  ]
}
```

### –ü–æ–∏—Å–∫ —Ç—Ä–µ–∫–æ–≤
```http
GET /api/music/lmusic/search?q=query&limit=20
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `q` - –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `limit` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 20)

**–ü—Ä–∏–º–µ—Ä:**
```http
GET /api/music/lmusic/search?q=–ë–∞—Å—Ç–∞&limit=10
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "count": 10,
  "query": "–ë–∞—Å—Ç–∞",
  "tracks": [
    {
      "id": "123456",
      "slug": "basta-samsara",
      "title": "–°–∞–º—Å–∞—Ä–∞",
      "artist": "–ë–∞—Å—Ç–∞",
      "downloadUrl": "https://lmusic.kz/api/download/123456",
      "streamUrl": "https://lmusic.kz/api/download/123456"
    }
  ]
}
```

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç—Ä–µ–∫–µ
```http
GET /api/music/lmusic/track/:slug/:trackId
```

**–ü—Ä–∏–º–µ—Ä:**
```http
GET /api/music/lmusic/track/basta-samsara/123456
```

### –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ MP3
```http
GET /api/music/lmusic/download/:trackId
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "trackId": "275171",
  "downloadUrl": "https://lmusic.kz/...",
  "streamUrl": "https://lmusic.kz/..."
}
```

### –ò–º–ø–æ—Ä—Ç —Ç—Ä–µ–∫–æ–≤ (Admin)
```http
POST /api/music/lmusic/import
Authorization: Bearer <token>
```

**Body:**
```json
{
  "genre": "pop-music",
  "language": "rus",
  "limit": 50,
  "maxPages": 3
}
```

**Admin endpoint:**
```http
POST /api/admin/music/lmusic/import
Authorization: Bearer <admin_token>
```

## üíª –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤—ã–π –ø–æ–∏—Å–∫ –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
```javascript
// 1. –ü–æ–∏—Å–∫ —Ç—Ä–µ–∫–∞
const response = await fetch('/api/music/lmusic/search?q=–ë–∞—Å—Ç–∞ –°–∞–Ω—Å–∞—Ä–∞');
const { tracks } = await response.json();

// 2. –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
const audio = new Audio(tracks[0].streamUrl);
audio.play();
```

### –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ –∂–∞–Ω—Ä–∞–º
```javascript
// –ü–æ–ª—É—á–∏—Ç—å —Ç—Ä–µ–∫–∏ –∏–∑ –∂–∞–Ω—Ä–∞
const response = await fetch('/api/music/lmusic/genre/pop-music?language=rus');
const { tracks } = await response.json();

// –°–æ–∑–¥–∞—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç
tracks.forEach(track => {
  playlist.addTrack({
    title: track.title,
    artist: track.artist,
    url: track.streamUrl,
    cover: track.coverUrl
  });
});
```

### –ú–∞—Å—Å–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç (Admin)
```javascript
// –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å 100 —Ç—Ä–µ–∫–æ–≤ —Ä—É—Å—Å–∫–æ–≥–æ —Ä–æ–∫–∞
const response = await fetch('/api/admin/music/lmusic/import', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer ' + adminToken,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    genre: 'rock',
    language: 'rus',
    limit: 100,
    maxPages: 5
  })
});

const result = await response.json();
console.log(`Imported: ${result.imported}, Skipped: ${result.skipped}`);
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:

```bash
node test-lmusic-kz.js
```

–¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç:
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∂–∞–Ω—Ä–æ–≤
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ —Ç—Ä–µ–∫–æ–≤ –∏–∑ –∂–∞–Ω—Ä–∞
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä—è–º—ã—Ö —Å—Å—ã–ª–æ–∫ –Ω–∞ MP3
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç—Ä–µ–∫–∞—Ö
- ‚úÖ –ü–æ–∏—Å–∫ —Ç—Ä–µ–∫–æ–≤
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∂–∞–Ω—Ä–æ–≤

## üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–∞—Ä—Å–∏–Ω–≥
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **Cheerio** –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ HTML
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç—Ä–µ–∫–∏, –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π, –æ–±–ª–æ–∂–∫–∏
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—é

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
–¢—Ä–µ–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å:
- `externalSource: 'lmusic.kz'`
- `externalId: 'lmusic_<trackId>'`
- `sourceType: 'external'`
- `filePath` –∏ `externalUrl` = –ø—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ MP3
- `allowDownload: true`

### API —Å–∞–π—Ç–∞
- **Download endpoint**: `https://lmusic.kz/api/download/{trackId}`
- **–§–æ—Ä–º–∞—Ç**: MP3 (–≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ)
- **–õ–∏–º–∏—Ç—ã**: –ù–µ—Ç —è–≤–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è

## üéµ –ü—Ä–∏–º–µ—Ä—ã —Ç—Ä–µ–∫–æ–≤

### –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏
- –ë–∞—Å—Ç–∞, –°–∫—Ä–∏–ø—Ç–æ–Ω–∏—Ç, –≠–ª–¥–∂–µ–π
- Zivert, –ú–æ—Ç, –ú–∞–∫—Å–∏–º
- –ë–∏-2, –ö–∏–Ω–æ, –î–î–¢
- Shaman, –ú–∞–∫—Å –ö–æ—Ä–∂

### –î–æ—Å—Ç—É–ø–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
- ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ä—É—Å—Å–∫–∞—è –ø–æ–ø-–º—É–∑—ã–∫–∞
- ‚úÖ –†–æ–∫ –∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞
- ‚úÖ –†—ç–ø –∏ —Ö–∏–ø-—Ö–æ–ø
- ‚úÖ –®–∞–Ω—Å–æ–Ω
- ‚úÖ –ö–∞–∑–∞—Ö—Å–∫–∞—è –º—É–∑—ã–∫–∞
- ‚úÖ –†–µ–º–∏–∫—Å—ã –∏ –∫–∞–≤–µ—Ä—ã

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–ü–∞—Ä—Å–∏–Ω–≥ HTML**: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–∞–π—Ç–∞
2. **Rate limiting**: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–¥–µ—Ä–∂–∫–∞ 1 —Å–µ–∫ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
3. **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ç—Ä–µ–∫–æ–≤**: –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä–µ–∫–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
4. **–ê–≤—Ç–æ—Ä—Å–∫–∏–µ –ø—Ä–∞–≤–∞**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–µ–≥–∞–ª—å–Ω–æ

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

### –ö–æ–º–±–∏–Ω–∞—Ü–∏—è —Å –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–æ–π
```javascript
// 1. –ü–æ–∏—Å–∫ –≤ –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–µ (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ)
const yandexResults = await searchYandex('–ë–∞—Å—Ç–∞ –°–∞–Ω—Å–∞—Ä–∞');

// 2. –ü–æ–∏—Å–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ–π –≤–µ—Ä—Å–∏–∏ –Ω–∞ Lmusic.kz
const lmusicResults = await searchLmusic('–ë–∞—Å—Ç–∞ –°–∞–Ω—Å–∞—Ä–∞');

// 3. –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
const track = {
  ...yandexResults[0], // –û–±–ª–æ–∂–∫–∞, –∂–∞–Ω—Ä, –∞–ª—å–±–æ–º –∏–∑ –Ø–Ω–¥–µ–∫—Å–∞
  streamUrl: lmusicResults[0].streamUrl // MP3 —Å Lmusic.kz
};
```

## üìù Roadmap

- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–ª—å–±–æ–º–æ–≤
- [ ] –ü–∞—Ä—Å–∏–Ω–≥ –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤
- [ ] –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ —Å —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- [ ] Webhook –¥–ª—è –Ω–æ–≤—ã—Ö —Ç—Ä–µ–∫–æ–≤

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü–∞—Ä—Å–∏–Ω–≥ –ø—É–±–ª–∏—á–Ω–æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å lmusic.kz. –°–æ–±–ª—é–¥–∞–π—Ç–µ –∞–≤—Ç–æ—Ä—Å–∫–∏–µ –ø—Ä–∞–≤–∞ –∏ —É—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–∞–π—Ç–∞.

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω  
**–ò—Å—Ç–æ—á–Ω–∏–∫**: https://lmusic.kz  
**API**: –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π, –±–µ–∑ –∫–ª—é—á–∞  
**–ö–∞—á–µ—Å—Ç–≤–æ**: MP3 320kbps
