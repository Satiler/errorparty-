# üéµ –ò–º–ø–æ—Ä—Ç –†—É—Å—Å–∫–∏—Ö –ê–ª—å–±–æ–º–æ–≤ + –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –î—É–±–ª–∏–∫–∞—Ç–æ–≤

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. üá∑üá∫ –ò–º–ø–æ—Ä—Ç —Ä—É—Å—Å–∫–∏—Ö –∞–ª—å–±–æ–º–æ–≤ –∏–∑ VK Music

**–°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å:** `backend/src/services/vk-music.service.js`

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- `getRussianTopAlbums(limit)` - –¢–æ–ø-50 —Ä—É—Å—Å–∫–∏—Ö –∞–ª—å–±–æ–º–æ–≤ 2024-2025
- `getNewRussianReleases(limit)` - –ù–æ–≤—ã–µ —Ä–µ–ª–∏–∑—ã —Ä—É—Å—Å–∫–∏—Ö –∞—Ä—Ç–∏—Å—Ç–æ–≤

**–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–ª—å–±–æ–º—ã:**
- üé§ **–†—ç–ø**: Miyagi, –°–∫—Ä–∏–ø—Ç–æ–Ω–∏—Ç, FACE, Oxxxymiron, –ë–∞—Å—Ç–∞, –≠–ª–¥–∂–µ–π
- üé∏ **–†–æ–∫**: –ö–∏–Ω–æ, –î–î–¢, –ë–∏-2, –ù–µ—Ä–≤—ã
- üéπ **–ü–æ–ø**: –ú–∞–∫—Å –ö–æ—Ä–∂, Zivert, Jony, –ï–≥–æ—Ä –ö—Ä–∏–¥, Niletto
- üéß **–ò–Ω–¥–∏**: –ú–æ–Ω–µ—Ç–æ—á–∫–∞, Pyrokinesis, Konfuz
- üîä **–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞**: IC3PEAK, CYGO, Cream Soda

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–º–ø–æ—Ä—Ç–∞:**
```
‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ –∞–ª—å–±–æ–º–æ–≤: 79
üá∑üá∫ –†—É—Å—Å–∫–∏—Ö –∞–ª—å–±–æ–º–æ–≤: 80
‚è≠Ô∏è  –ü—Ä–æ–ø—É—â–µ–Ω–æ (—É–∂–µ –±—ã–ª–æ): 57
```

---

### 2. üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –≤ –ø–ª–µ–π–ª–∏—Å—Ç–∞—Ö

**–ü—Ä–æ–±–ª–µ–º–∞:** –¢—Ä–µ–∫–∏ –º–æ–≥–ª–∏ –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –≤ –ø–ª–µ–π–ª–∏—Å—Ç—ã –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º —Ç—Ä–µ–∫–∞

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ñ–∞–π–ª—ã:**
- `backend/src/services/smart-discovery.service.js`
- `backend/src/modules/music/ai-music-discovery.service.js`
- `backend/src/modules/music/music.controller.js` (—É–∂–µ –±—ã–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞)

**–ö–æ–¥ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```javascript
const existing = await PlaylistTrack.findOne({
  where: {
    playlistId: playlist.id,
    trackId: track.id
  }
});

if (!existing) {
  await PlaylistTrack.create({
    playlistId: playlist.id,
    trackId: track.id,
    position: i + 1
  });
}
```

**–°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –æ—á–∏—Å—Ç–∫–∏:** `backend/import-albums-russian.js`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∞–ª—å–±–æ–º—ã –∏–∑ iTunes + VK Music

---

### 3. üíø –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–ª—å–±–æ–º–æ–≤ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

**–û–±–Ω–æ–≤–ª–µ–Ω —Ñ–∞–π–ª:** `frontend/src/pages/MusicPageSpotify.jsx`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –ù–æ–≤–∞—è —Å–µ–∫—Ü–∏—è "üíø –ù–æ–≤—ã–µ –∞–ª—å–±–æ–º—ã"
- –ó–∞–≥—Ä—É–∑–∫–∞ –∞–ª—å–±–æ–º–æ–≤ –∏–∑ API (`GET /api/music/albums`)
- –ö—Ä–∞—Å–∏–≤—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∞–ª—å–±–æ–º–æ–≤ —Å:
  - –û–±–ª–æ–∂–∫–æ–π –∞–ª—å–±–æ–º–∞
  - –ù–∞–∑–≤–∞–Ω–∏–µ–º –∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–º
  - –ì–æ–¥–æ–º —Ä–µ–ª–∏–∑–∞
  - –ê–Ω–∏–º–∞—Ü–∏–µ–π –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏

**API Endpoint:**
```
GET /api/music/albums?limit=30&sortBy=createdAt&order=DESC
```

**–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:**
- –°–µ—Ç–∫–∞ 2-3-4-6 –∫–æ–ª–æ–Ω–æ–∫ (–∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è)
- –î–æ 18 –∞–ª—å–±–æ–º–æ–≤ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π
- –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `/music/albums/:id` –ø—Ä–∏ –∫–ª–∏–∫–µ

---

## üìù –°–∫—Ä–∏–ø—Ç—ã

### –ò–º–ø–æ—Ä—Ç –∞–ª—å–±–æ–º–æ–≤ —Å —Ä—É—Å—Å–∫–∏–º–∏ + –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

```bash
docker exec errorparty_backend node /app/import-albums-russian.js
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ —É–¥–∞–ª—è–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã –≤ –ø–ª–µ–π–ª–∏—Å—Ç–∞—Ö
2. üåç –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ç–æ–ø-–∞–ª—å–±–æ–º—ã –∏–∑ iTunes (US, GB, DE)
3. üá∑üá∫ –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç 50 —Ä—É—Å—Å–∫–∏—Ö –∞–ª—å–±–æ–º–æ–≤ –∏–∑ VK Music
4. üÜï –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç 30 –Ω–æ–≤—ã—Ö —Ä—É—Å—Å–∫–∏—Ö —Ä–µ–ª–∏–∑–æ–≤

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∞–ª—å–±–æ–º–æ–≤:
- **–í—Å–µ–≥–æ –∞–ª—å–±–æ–º–æ–≤:** 186+
- **–†—É—Å—Å–∫–∏—Ö –∞–ª—å–±–æ–º–æ–≤:** 80
- **–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö:** 106+
- **–ò—Å—Ç–æ—á–Ω–∏–∫–∏:** iTunes RSS, VK Music

### –ö–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö:
- ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Ç—Ä–µ–∫–æ–≤ –≤ –ø–ª–µ–π–ª–∏—Å—Ç–∞—Ö
- ‚úÖ –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∞–ª—å–±–æ–º—ã (–ø–æ artist + title)
- ‚úÖ –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ: –≥–æ–¥, –∂–∞–Ω—Ä, –æ–±–ª–æ–∂–∫–∞, –∏—Å—Ç–æ—á–Ω–∏–∫

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ù–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ:

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É `/music`
2. –ü—Ä–æ–ª–∏—Å—Ç–∞–π—Ç–µ –≤–Ω–∏–∑ –¥–æ —Å–µ–∫—Ü–∏–∏ "üíø –ù–æ–≤—ã–µ –∞–ª—å–±–æ–º—ã"
3. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∞–ª—å–±–æ–º –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –¥–µ—Ç–∞–ª–µ–π

### API –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:

```javascript
// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∞–ª—å–±–æ–º—ã
GET /api/music/albums?limit=50&page=1

// –ü–æ–∏—Å–∫ –ø–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é
GET /api/music/albums?artist=Miyagi

// –§–∏–ª—å—Ç—Ä –ø–æ –∂–∞–Ω—Ä—É
GET /api/music/albums?genre=Rap

// –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∞–ª—å–±–æ–º
GET /api/music/albums/:id

// –ü–æ–ª—É—á–∏—Ç—å —Ç—Ä–µ–∫–∏ –∞–ª—å–±–æ–º–∞
GET /api/music/albums/:id/tracks
```

---

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ `backend/src/server.js` –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ cron job:

```javascript
const cron = require('node-cron');

// –ö–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é –æ–±–Ω–æ–≤–ª—è—Ç—å —Ä—É—Å—Å–∫–∏–µ –∞–ª—å–±–æ–º—ã
cron.schedule('0 6 * * 0', async () => {
  console.log('üá∑üá∫ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä—É—Å—Å–∫–∏—Ö –∞–ª—å–±–æ–º–æ–≤...');
  exec('node /app/import-albums-russian.js');
});
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ –∞–ª—å–±–æ–º–æ–≤ | 79 –Ω–æ–≤—ã—Ö |
| –†—É—Å—Å–∫–∏—Ö –∞—Ä—Ç–∏—Å—Ç–æ–≤ | 50+ |
| –ñ–∞–Ω—Ä–æ–≤ | 5 (Rap, Pop, Rock, Indie, Electronic) |
| –£–¥–∞–ª–µ–Ω–æ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ | 0 (–≤—Å–µ —á–∏—Å—Ç–æ!) |
| –í—Ä–µ–º—è –∏–º–ø–æ—Ä—Ç–∞ | ~5 —Å–µ–∫—É–Ω–¥ |

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **VK Music:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—á–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∞–ª—å–±–æ–º–æ–≤
   - *–ü—Ä–∏—á–∏–Ω–∞:* VK —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
   - *–†–µ—à–µ–Ω–∏–µ:* –°–ø–∏—Å–æ–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é —Ä–∞–∑ –≤ –∫–≤–∞—Ä—Ç–∞–ª

2. **–û–±–ª–æ–∂–∫–∏ –∞–ª—å–±–æ–º–æ–≤:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç placeholder
   - *–ü—Ä–∏—á–∏–Ω–∞:* VK –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏
   - *–†–µ—à–µ–Ω–∏–µ:* –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Last.fm –∏–ª–∏ Spotify API

---

## üé® –£–ª—É—á—à–µ–Ω–∏—è UI

**–°–µ–∫—Ü–∏—è –∞–ª—å–±–æ–º–æ–≤:**
- –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–µ —Ñ–æ–Ω—ã purple ‚Üí pink
- –ê–Ω–∏–º–∞—Ü–∏—è scale + translateY –ø—Ä–∏ hover
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–µ—Ç–∫–∞ (2/3/4/6 –∫–æ–ª–æ–Ω–æ–∫)
- Emoji –∏–∫–æ–Ω–∫–∏ –¥–ª—è –∞–ª—å–±–æ–º–æ–≤ –±–µ–∑ –æ–±–ª–æ–∂–∫–∏
- –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á

- [x] –°–æ–∑–¥–∞–Ω VK Music —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä—É—Å—Å–∫–∏—Ö –∞–ª—å–±–æ–º–æ–≤
- [x] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –¥—É–±–ª–∏–∫–∞—Ç—ã –≤ –ø–ª–µ–π–ª–∏—Å—Ç–∞—Ö (–≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã)
- [x] –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–ª—å–±–æ–º–æ–≤ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- [x] –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ 80 —Ä—É—Å—Å–∫–∏—Ö –∞–ª—å–±–æ–º–æ–≤
- [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ API
- [x] –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üîÆ –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –æ–±–ª–æ–∂–µ–∫:**
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Last.fm Cover Art API
   - Fallback –Ω–∞ Spotify Web API

2. **–ü–∞—Ä—Å–∏–Ω–≥ VK Music:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Puppeteer –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - –†–µ–∞–ª—å–Ω—ã–µ —Ç–æ–ø-—á–∞—Ä—Ç—ã –∏–∑ VK

3. **–£–º–Ω—ã–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã –∏–∑ –∞–ª—å–±–æ–º–æ–≤:**
   - "–õ—É—á—à–∏–µ —Ç—Ä–µ–∫–∏ –∏–∑ –Ω–æ–≤—ã—Ö –∞–ª—å–±–æ–º–æ–≤"
   - "–†—É—Å—Å–∫–∏–π —Ä—ç–ø 2024"
   - "–ò–Ω–¥–∏-—Ä–µ–ª–∏–∑—ã"

4. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–ª—å–±–æ–º–æ–≤:**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–π
   - –õ–∞–π–∫–∏ –∞–ª—å–±–æ–º–æ–≤
   - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∞–ª—å–±–æ–º–∞–º

---

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2 –¥–µ–∫–∞–±—Ä—è 2024  
**–í–µ—Ä—Å–∏—è:** 2.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É
