# üéµ –ü–ª–∞–Ω: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –°–∏—Å—Ç–µ–º–∞ –ú—É–∑—ã–∫–∞–ª—å–Ω—ã—Ö –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π (–∫–∞–∫ Spotify)

## üìã –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞
–°–æ–∑–¥–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏—Å—Ç–µ–º—É, –∫–æ—Ç–æ—Ä–∞—è:
- –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç **—Å–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç—Ä–µ–∫–∏ –≤ –º–∏—Ä–µ**
- –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∏—Ö –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –°–æ–∑–¥–∞–µ—Ç **–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã** (–¢–æ–ø-50 Global, –•–∏—Ç—ã –Ω–µ–¥–µ–ª–∏, –ù–æ–≤–∏–Ω–∫–∏)
- –û–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç **–±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞**

---

## ‚úÖ –≠–¢–ê–ü 1: –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ç—Ä–µ–∫–æ–≤

### 1.1 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API –º—É–∑—ã–∫–∞–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- [ ] **Last.fm API** - –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ø-—á–∞—Ä—Ç—ã –ø–æ —Å—Ç—Ä–∞–Ω–∞–º
  - Endpoint: `chart.getTopTracks`
  - –õ–∏–º–∏—Ç: 5000 –∑–∞–ø—Ä–æ—Å–æ–≤/—á–∞—Å
  - –î–∞–Ω–Ω—ã–µ: –Ω–∞–∑–≤–∞–Ω–∏–µ, –∞—Ä—Ç–∏—Å—Ç, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–π
  
- [ ] **Spotify Web API** - –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ —á–∞—Ä—Ç—ã
  - Endpoint: `playlists/{playlist_id}/tracks` (Top 50 Global)
  - –¢—Ä–µ–±—É–µ—Ç—Å—è: Client ID + Secret
  - –î–∞–Ω–Ω—ã–µ: –ø–æ–ª–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ç—Ä–µ–∫–æ–≤
  
- [ ] **iTunes/Apple Music RSS** - —Ç–æ–ø-100 –ø–æ —Å—Ç—Ä–∞–Ω–∞–º
  - URL: `https://itunes.apple.com/us/rss/topsongs/limit=100/json`
  - –ë–µ—Å–ø–ª–∞—Ç–Ω–æ, –±–µ–∑ API –∫–ª—é—á–∞
  - –î–∞–Ω–Ω—ã–µ: —Ç—Ä–µ–∫–∏, –∞–ª—å–±–æ–º—ã, –ø–æ–∑–∏—Ü–∏–∏ –≤ —á–∞—Ä—Ç–∞—Ö

- [ ] **YouTube Music Trending** (—á–µ—Ä–µ–∑ scraping)
  - –ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ç—Ä–µ–Ω–¥–æ–≤
  - –î–∞–Ω–Ω—ã–µ: –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç—Ä–µ–∫–∏, views, –ª–∞–π–∫–∏

### 1.2 –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
- [ ] **Shazam API** - —Ç–æ–ø-—á–∞—Ä—Ç—ã –ø–æ —Å—Ç—Ä–∞–Ω–∞–º
- [ ] **Deezer API** - —á–∞—Ä—Ç—ã –∏ –Ω–æ–≤–∏–Ω–∫–∏
- [ ] **Genius API** - —Ç–µ–∫—Å—Ç—ã –ø–µ—Å–µ–Ω + –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ

---

## ‚úÖ –≠–¢–ê–ü 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç —Ç—Ä–µ–∫–æ–≤

### 2.1 –ü–æ–∏—Å–∫ —Ç—Ä–µ–∫–æ–≤ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞
- [ ] –°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å `music-discovery.service.js`
  - –§—É–Ω–∫—Ü–∏—è `getGlobalTop100()` - —Ç–æ–ø-100 –≤ –º–∏—Ä–µ
  - –§—É–Ω–∫—Ü–∏—è `getNewReleases()` - –Ω–æ–≤–∏–Ω–∫–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é
  - –§—É–Ω–∫—Ü–∏—è `getTrendingByCountry(country)` - —Ç–æ–ø –ø–æ —Å—Ç—Ä–∞–Ω–µ

### 2.2 –ü–æ–∏—Å–∫ streamUrl
- [ ] –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç—Ä–µ–∫–∞ –∏–∑ —á–∞—Ä—Ç–∞ –∏—Å–∫–∞—Ç—å –Ω–∞ lmusic.kz
  - –ü–æ–∏—Å–∫ –ø–æ "–∞—Ä—Ç–∏—Å—Ç + –Ω–∞–∑–≤–∞–Ω–∏–µ"
  - –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω - –ø—Ä–æ–±–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—é
  - –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω - –∏—Å–∫–∞—Ç—å –Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö

### 2.3 –ò–º–ø–æ—Ä—Ç –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (artist + title)
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö:
  - `popularity_score` - —Ä–µ–π—Ç–∏–Ω–≥ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏
  - `chart_position` - –ø–æ–∑–∏—Ü–∏—è –≤ —á–∞—Ä—Ç–µ
  - `trending_date` - –¥–∞—Ç–∞ –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ —Ç—Ä–µ–Ω–¥—ã
  - `source` - –æ—Ç–∫—É–¥–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω (spotify/lastfm/itunes)

---

## ‚úÖ –≠–¢–ê–ü 3: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤

### 3.1 –¢–∏–ø—ã editorial –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤
- [ ] **"–¢–æ–ø-50 –ú–∏—Ä–æ–≤—ã–µ –•–∏—Ç—ã"** - –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ
  - 50 —Å–∞–º—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ç—Ä–µ–∫–æ–≤ –∏–∑ Last.fm/Spotify
  - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ `popularity_score`
  
- [ ] **"–ù–æ–≤–∏–Ω–∫–∏ –Ω–µ–¥–µ–ª–∏"** - –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ
  - –¢—Ä–µ–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π
  - –° –≤—ã—Å–æ–∫–∏–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏
  
- [ ] **"–í–∏—Ä—É—Å–Ω—ã–µ –•–∏—Ç—ã"** - –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤
  - –¢—Ä–µ–∫–∏ —Å —Ä–µ–∑–∫–∏–º —Ä–æ—Å—Ç–æ–º –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏
  - Trending –Ω–∞ YouTube/TikTok

- [ ] **"–¢–æ–ø-100 –†–æ—Å—Å–∏—è"** - –µ–∂–µ–¥–Ω–µ–≤–Ω–æ
  - –†—É—Å—Å–∫–æ—è–∑—ã—á–Ω—ã–µ —Ç—Ä–µ–∫–∏ –∏–∑ —á–∞—Ä—Ç–æ–≤
  
- [ ] **"–û—Ç–∫—Ä—ã—Ç–∏—è –Ω–µ–¥–µ–ª–∏"** - –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ
  - –ù–æ–≤—ã–µ –∞—Ä—Ç–∏—Å—Ç—ã —Å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–æ–º

### 3.2 –£–º–Ω—ã–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã –ø–æ –∂–∞–Ω—Ä–∞–º
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ –∂–∞–Ω—Ä–∞–º
- [ ] –ü–ª–µ–π–ª–∏—Å—Ç—ã: Pop, Rock, Hip-Hop, Electronic, R&B
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 3 –¥–Ω—è

---

## ‚úÖ –≠–¢–ê–ü 4: –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á (Cron Jobs)

### 4.1 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
```javascript
// backend/src/services/music-scheduler.js
import cron from 'node-cron';

// –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 3:00 —É—Ç—Ä–∞ - –∏–º–ø–æ—Ä—Ç —Ç–æ–ø-100
cron.schedule('0 3 * * *', async () => {
  await importGlobalTop100();
  await updatePlaylist('–¢–æ–ø-50 –ú–∏—Ä–æ–≤—ã–µ –•–∏—Ç—ã');
});

// –ö–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –≤ 4:00 - –Ω–æ–≤–∏–Ω–∫–∏ –Ω–µ–¥–µ–ª–∏
cron.schedule('0 4 * * MON', async () => {
  await importNewReleases();
  await updatePlaylist('–ù–æ–≤–∏–Ω–∫–∏ –Ω–µ–¥–µ–ª–∏');
});

// –ö–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤ - –≤–∏—Ä—É—Å–Ω—ã–µ —Ö–∏—Ç—ã
cron.schedule('0 */6 * * *', async () => {
  await importTrendingTracks();
  await updatePlaylist('–í–∏—Ä—É—Å–Ω—ã–µ –•–∏—Ç—ã');
});
```

### 4.2 –ó–∞–¥–∞—á–∏
- [ ] **–ò–º–ø–æ—Ä—Ç —Ç–æ–ø-—Ç—Ä–µ–∫–æ–≤** - –µ–∂–µ–¥–Ω–µ–≤–Ω–æ 3:00
- [ ] **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤** - –µ–∂–µ–¥–Ω–µ–≤–Ω–æ 4:00
- [ ] **–û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Ç—Ä–µ–∫–æ–≤** - –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ (–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ)
- [ ] **–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∏—Ç—ã—Ö —Å—Å—ã–ª–æ–∫** - –µ–∂–µ–¥–Ω–µ–≤–Ω–æ 5:00

---

## ‚úÖ –≠–¢–ê–ü 5: API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 5.1 Admin API endpoints
- [ ] `POST /api/admin/music/discover` - –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç –≤—Ä—É—á–Ω—É—é
- [ ] `POST /api/admin/music/playlists/refresh` - –æ–±–Ω–æ–≤–∏—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç—ã
- [ ] `GET /api/admin/music/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–º–ø–æ—Ä—Ç–∞
- [ ] `DELETE /api/admin/music/tracks/cleanup` - —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —Ç—Ä–µ–∫–∏

### 5.2 –ü—É–±–ª–∏—á–Ω—ã–µ endpoints
- [ ] `GET /api/music/trending` - —Ç–µ–∫—É—â–∏–µ —Ç—Ä–µ–Ω–¥—ã
- [ ] `GET /api/music/charts/global` - –º–∏—Ä–æ–≤–æ–π —Ç–æ–ø-100
- [ ] `GET /api/music/charts/:country` - —Ç–æ–ø –ø–æ —Å—Ç—Ä–∞–Ω–µ
- [ ] `GET /api/music/new-releases` - –Ω–æ–≤–∏–Ω–∫–∏

---

## ‚úÖ –≠–¢–ê–ü 6: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—Ö–µ–º—ã)

### 6.1 –ù–æ–≤—ã–µ –ø–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü–µ `Tracks`
```sql
ALTER TABLE "Tracks" ADD COLUMN IF NOT EXISTS popularity_score INTEGER DEFAULT 0;
ALTER TABLE "Tracks" ADD COLUMN IF NOT EXISTS chart_position INTEGER;
ALTER TABLE "Tracks" ADD COLUMN IF NOT EXISTS trending_date TIMESTAMP;
ALTER TABLE "Tracks" ADD COLUMN IF NOT EXISTS import_source VARCHAR(50);
ALTER TABLE "Tracks" ADD COLUMN IF NOT EXISTS play_count_external BIGINT DEFAULT 0;
```

### 6.2 –ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ `ChartHistory`
```sql
CREATE TABLE "ChartHistory" (
  id SERIAL PRIMARY KEY,
  track_id INTEGER REFERENCES "Tracks"(id),
  chart_type VARCHAR(50), -- 'global', 'russia', 'usa'
  position INTEGER,
  date DATE,
  popularity_score INTEGER,
  created_at TIMESTAMP DEFAULT NOW()
);
```

---

## ‚úÖ –≠–¢–ê–ü 7: –ê–ª–≥–æ—Ä–∏—Ç–º –æ—Ü–µ–Ω–∫–∏ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏

### 7.1 –§–æ—Ä–º—É–ª–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞
```javascript
popularityScore = (
  chart_position * 0.4 +        // –ü–æ–∑–∏—Ü–∏—è –≤ —á–∞—Ä—Ç–∞—Ö
  play_count_external * 0.3 +   // –ü—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è –Ω–∞ –¥—Ä—É–≥–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö
  local_play_count * 0.2 +      // –ü—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è –Ω–∞ –Ω–∞—à–µ–º —Å–∞–π—Ç–µ
  recency_bonus * 0.1           // –ë–æ–Ω—É—Å –∑–∞ –Ω–æ–≤–∏–∑–Ω—É
)
```

### 7.2 –ó–∞–¥–∞—á–∏
- [ ] –§—É–Ω–∫—Ü–∏—è `calculatePopularity(track)`
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ –∫–∞–∂–¥—ã–µ 12 —á–∞—Å–æ–≤
- [ ] –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥–∞

---

## ‚úÖ –≠–¢–ê–ü 8: –§—Ä–æ–Ω—Ç–µ–Ω–¥ - –ù–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### 8.1 –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–ß–∞—Ä—Ç—ã"
- [ ] `/music/charts/global` - –º–∏—Ä–æ–≤–æ–π —Ç–æ–ø-100
- [ ] `/music/charts/russia` - —Ç–æ–ø-100 –†–æ—Å—Å–∏–∏
- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π, –∏–∑–º–µ–Ω–µ–Ω–∏–π (‚Üë‚Üì)
- [ ] –§–∏–ª—å—Ç—Ä—ã –ø–æ –∂–∞–Ω—Ä–∞–º

### 8.2 –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–¢—Ä–µ–Ω–¥—ã"
- [ ] `/music/trending` - –≤–∏—Ä—É—Å–Ω—ã–µ —Ç—Ä–µ–∫–∏
- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–º–ø–∞ —Ä–æ—Å—Ç–∞ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏
- [ ] Badges: "üî• Trending", "‚≠ê Rising Star"

### 8.3 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- [ ] –í–∏–¥–∂–µ—Ç "–¢–æ–ø-10 —Å–µ–≥–æ–¥–Ω—è"
- [ ] –ö–∞—Ä—É—Å–µ–ª—å "–ù–æ–≤–∏–Ω–∫–∏ –Ω–µ–¥–µ–ª–∏"
- [ ] –ë–ª–æ–∫ "–û—Ç–∫—Ä—ã—Ç–∏—è –º–µ—Å—è—Ü–∞"

---

## ‚úÖ –≠–¢–ê–ü 9: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### 9.1 –õ–æ–≥–∏ –∏–º–ø–æ—Ä—Ç–∞
- [ ] –ó–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
- [ ] –û—à–∏–±–∫–∏ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ —Ç—Ä–µ–∫–æ–≤
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: —Å–∫–æ–ª—å–∫–æ —Ç—Ä–µ–∫–æ–≤ –Ω–∞–π–¥–µ–Ω–æ/–∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ

### 9.2 –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω—É
- [ ] Email –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –∏–º–ø–æ—Ä—Ç–∞
- [ ] Telegram –±–æ—Ç —Å –æ—Ç—á–µ—Ç–∞–º–∏
- [ ] Dashboard —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π

---

## ‚úÖ –≠–¢–ê–ü 10: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

### 10.1 –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] Redis –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–æ–ø-100 (TTL: 1 —á–∞—Å)
- [ ] –ö—ç—à API responses –æ—Ç Last.fm/Spotify
- [ ] –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤

### 10.2 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- [ ] –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç —Ç—Ä–µ–∫–æ–≤ (10 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)
- [ ] Batch insert –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- [ ] –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ `popularity_score`, `trending_date`

---

## üìä –ú–ï–¢–†–ò–ö–ò –£–°–ü–ï–•–ê

### KPI —Å–∏—Å—Ç–µ–º—ã
- [ ] **–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–æ–ø-100**: 80%+ —Ç—Ä–µ–∫–æ–≤ –∏–∑ Spotify/Last.fm –Ω–∞–π–¥–µ–Ω—ã
- [ ] **–ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å**: –ø–ª–µ–π–ª–∏—Å—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ
- [ ] **–†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ**: 60%+ –∑–∞–ø–∞–¥–Ω—ã—Ö, 40% —Ä—É—Å—Å–∫–∏—Ö —Ç—Ä–µ–∫–æ–≤
- [ ] **–ö–∞—á–µ—Å—Ç–≤–æ**: 95%+ —Ç—Ä–µ–∫–æ–≤ —Å –≤–∞–ª–∏–¥–Ω—ã–º–∏ streamUrl
- [ ] **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –∏–º–ø–æ—Ä—Ç 100 —Ç—Ä–µ–∫–æ–≤ < 5 –º–∏–Ω—É—Ç

---

## üöÄ –ü–õ–ê–ù –í–ù–ï–î–†–ï–ù–ò–Ø

### –§–∞–∑–∞ 1 (1-2 –Ω–µ–¥–µ–ª–∏)
1. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Last.fm API
2. ‚úÖ –ê–≤—Ç–æ–∏–º–ø–æ—Ä—Ç —Ç–æ–ø-100 —Ç—Ä–µ–∫–æ–≤
3. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–µ–π–ª–∏—Å—Ç–∞ "–¢–æ–ø-50 –ú–∏—Ä–æ–≤—ã–µ –•–∏—Ç—ã"
4. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ cron-–∑–∞–¥–∞—á–∏ (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ)

### –§–∞–∑–∞ 2 (2-3 –Ω–µ–¥–µ–ª–∏)
1. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å Spotify API
2. ‚è≥ –°–æ–∑–¥–∞—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç—ã –ø–æ –∂–∞–Ω—Ä–∞–º
3. ‚è≥ –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–ß–∞—Ä—Ç—ã" –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
4. ‚è≥ –ê–ª–≥–æ—Ä–∏—Ç–º –æ—Ü–µ–Ω–∫–∏ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏

### –§–∞–∑–∞ 3 (3-4 –Ω–µ–¥–µ–ª–∏)
1. ‚è≥ YouTube Music integration
2. ‚è≥ –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–¢—Ä–µ–Ω–¥—ã"
3. ‚è≥ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω—É
4. ‚è≥ Dashboard —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π

### –§–∞–∑–∞ 4 (1 –º–µ—Å—è—Ü)
1. ‚è≥ –£–º–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. ‚è≥ –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã
3. ‚è≥ A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤
4. ‚è≥ –ü–æ–ª–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

---

## üîß –¢–ï–•–ù–û–õ–û–ì–ò–ß–ï–°–ö–ò–ô –°–¢–ï–ö

### Backend
- **Node.js + Express** - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä
- **node-cron** - –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á
- **axios** - HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ API
- **cheerio** - –ø–∞—Ä—Å–∏–Ω–≥ HTML (–¥–ª—è scraping)
- **Sequelize** - ORM –¥–ª—è PostgreSQL

### APIs
- **Last.fm API** - —á–∞—Ä—Ç—ã –∏ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å
- **Spotify Web API** - –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã
- **iTunes RSS** - —Ç–æ–ø-100 –ø–æ —Å—Ç—Ä–∞–Ω–∞–º
- **lmusic.kz** - –∏—Å—Ç–æ—á–Ω–∏–∫ streamUrl

### Frontend
- **React** - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **React Query** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **Chart.js** - –≥—Ä–∞—Ñ–∏–∫–∏ –ø–æ–∑–∏—Ü–∏–π –≤ —á–∞—Ä—Ç–∞—Ö
- **Framer Motion** - –∞–Ω–∏–º–∞—Ü–∏–∏

---

## üìù –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–°–¥–µ–ª–∞—Ç—å —Å–µ–π—á–∞—Å)
1. üî¥ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ Last.fm - –ø–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á
2. üî¥ –°–æ–∑–¥–∞—Ç—å `music-discovery.service.js`
3. üî¥ –ù–∞–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `importLastFmTop100()`
4. üî¥ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç 10 —Ç—Ä–µ–∫–æ–≤
5. üî¥ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å cron-–∑–∞–¥–∞—á—É –Ω–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∑–∞–ø—É—Å–∫

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–ù–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ)
1. üü° –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–∞
2. üü° –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `ChartHistory`
3. üü° –û–±–Ω–æ–≤–∏—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç "–ú–∏—Ä–æ–≤—ã–µ –•–∏—Ç—ã 2025" —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
4. üü° –î–æ–±–∞–≤–∏—Ç—å badge "üî• Trending" –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–°–ª–µ–¥—É—é—â–∞—è –Ω–µ–¥–µ–ª—è)
1. üü¢ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Spotify API
2. üü¢ –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/music/charts`
3. üü¢ –ê–ª–≥–æ—Ä–∏—Ç–º popularity_score
4. üü¢ Admin dashboard

---

## ‚ùì –í–û–ü–†–û–°–´ –î–õ–Ø –û–ë–°–£–ñ–î–ï–ù–ò–Ø

1. **–ö–∞–∫–∏–µ —Å—Ç—Ä–∞–Ω—ã –≤–∞–∂–Ω—ã –¥–ª—è —á–∞—Ä—Ç–æ–≤?** (–†–æ—Å—Å–∏—è, –°–®–ê, –ï–≤—Ä–æ–ø–∞?)
2. **–ö–∞–∫ —á–∞—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç—ã?** (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ / –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ?)
3. **–°–∫–æ–ª—å–∫–æ —Ç—Ä–µ–∫–æ–≤ —Ö—Ä–∞–Ω–∏—Ç—å –≤ –±–∞–∑–µ?** (–≤—Å–µ –∏–ª–∏ —Ç–æ–ª—å–∫–æ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ?)
4. **–ù—É–∂–Ω–∞ –ª–∏ –º–æ–¥–µ—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π?** (–∞–≤—Ç–æ –∏–ª–∏ —Ä—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞?)
5. **–ë—é–¥–∂–µ—Ç –Ω–∞ API?** (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∏–ª–∏ –ø–ª–∞—Ç–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏?)

---

## üéØ –ì–û–¢–û–í–û –ö –°–¢–ê–†–¢–£?

**–ù–∞—á–Ω—ë–º —Å –ø—Ä–æ—Å—Ç–æ–≥–æ:**
1. –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º Last.fm API –∫–ª—é—á
2. –°–æ–∑–¥–∞—ë–º –±–∞–∑–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç —Ç–æ–ø-100
3. –ó–∞–ø—É—Å–∫–∞–µ–º –ø–µ—Ä–≤—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–ª–µ–π–ª–∏—Å—Ç
4. –°–º–æ—Ç—Ä–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ —É–ª—É—á—à–∞–µ–º

**–•–æ—á–µ—à—å –Ω–∞—á–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å? –°–∫–∞–∂–∏ "–≥–æ" –∏ –Ω–∞—á–Ω—ë–º —Å –≠—Ç–∞–ø–∞ 1!** üöÄ
