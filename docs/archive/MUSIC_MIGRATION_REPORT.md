# üìä –û—Ç—á–µ—Ç –æ –º–∏–≥—Ä–∞—Ü–∏–∏ –º—É–∑—ã–∫–∞–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

**–î–∞—Ç–∞:** 3 –¥–µ–∫–∞–±—Ä—è 2025
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ß–∞—Å—Ç–∏—á–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ

---

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ `MUSIC_SOURCES_ARCHITECTURE.md` - –ø–æ–ª–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- ‚úÖ `MUSIC_IMPORT_CORRECT_STRATEGY.md` - –∫—Ä–∞—Ç–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- ‚úÖ `MUSIC_MIGRATION_CHECKLIST.md` - —á–µ–∫–ª–∏—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `MUSIC_IMPORT_SUMMARY.md`

### 2. –°–∫—Ä–∏–ø—Ç—ã –∏–º–ø–æ—Ä—Ç–∞
- ‚úÖ `backend/cleanup-preview-tracks.js` - –æ—á–∏—Å—Ç–∫–∞ preview —Ç—Ä–µ–∫–æ–≤
- ‚úÖ `backend/import-from-charts.js` - –∏–º–ø–æ—Ä—Ç —Å iTunes –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ ‚Üí VK/Lmusic —Ç—Ä–µ–∫–∏
- ‚úÖ `backend/import-from-charts-no-vk.js` - –∏–º–ø–æ—Ä—Ç –±–µ–∑ VK (—Ç–æ–ª—å–∫–æ Lmusic.kz)

### 3. –ü–µ—Ä–≤—ã–π –∏–º–ø–æ—Ä—Ç
- ‚úÖ –û—á–∏—Å—Ç–∫–∞: preview —Ç—Ä–µ–∫–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ (–±–∞–∑–∞ –±—ã–ª–∞ —á–∏—Å—Ç–∞—è)
- ‚úÖ –ò–º–ø–æ—Ä—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω —á–µ—Ä–µ–∑ Lmusic.kz
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç: **56 —Ç—Ä–µ–∫–æ–≤** –¥–æ–±–∞–≤–ª–µ–Ω–æ (–±—ã–ª–æ 16)

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–æ –º–∏–≥—Ä–∞—Ü–∏–∏:
- –¢—Ä–µ–∫–æ–≤: 16
- –° URL: 0
- Preview —Ç—Ä–µ–∫–æ–≤: 0

### –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏:
- –¢—Ä–µ–∫–æ–≤: 72
- –° URL: 56 (78%)
- –ò—Å—Ç–æ—á–Ω–∏–∫: Lmusic.kz
- –ê–ª—å–±–æ–º–æ–≤: 15

### –ü–æ–∫—Ä—ã—Ç–∏–µ —á–∞—Ä—Ç–æ–≤:
- iTunes charts: 75 —Ç—Ä–µ–∫–æ–≤
- –ù–∞–π–¥–µ–Ω–æ –Ω–∞ Lmusic.kz: ~56 —Ç—Ä–µ–∫–æ–≤
- –ü–æ–∫—Ä—ã—Ç–∏–µ: **~75%** ‚úÖ

---

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã

### VK Music –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–ü—Ä–∏—á–∏–Ω–∞:** Flood control –æ—Ç VK
```
Error: Too many attempts were made to sign in to this account 
with a password. Please use a different sign-in method or try 
again after a few hours.
```

**–†–µ—à–µ–Ω–∏–µ:**
- ‚è∞ –ü–æ–¥–æ–∂–¥–∞—Ç—å 3-6 —á–∞—Å–æ–≤
- üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É –ø–æ–∑–∂–µ
- üîë –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π VK –∞–∫–∫–∞—É–Ω—Ç

---

## üéØ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞

### iTunes API ‚úÖ –¢–û–õ–¨–ö–û –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–ø-100 —á–∞—Ä—Ç–æ–≤
- ‚úÖ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç: –Ω–∞–∑–≤–∞–Ω–∏–µ, –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å, –∂–∞–Ω—Ä, –æ–±–ª–æ–∂–∫—É, –ø–æ–∑–∏—Ü–∏—é
- ‚úÖ –ù–ï –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç preview URL

### Lmusic.kz ‚úÖ –ü–æ–ª–Ω—ã–µ —Ç—Ä–µ–∫–∏
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ–ª–Ω—ã—Ö —Ç—Ä–µ–∫–æ–≤
- ‚úÖ –ü—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ stream URL
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
- ‚ö†Ô∏è –ù–∞—Ö–æ–¥–∏—Ç ~75% —Ç—Ä–µ–∫–æ–≤ –∏–∑ —á–∞—Ä—Ç–æ–≤

### VK Music ‚è≥ –í—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- ‚è≥ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω flood control
- üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤
- üéØ –û–∂–∏–¥–∞–µ—Ç—Å—è –ø–æ–∫—Ä—ã—Ç–∏–µ >90% –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ VK

---

## üìà –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π

### –†–∞–Ω—å—à–µ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
```
iTunes API ‚Üí Preview URL (30 —Å–µ–∫) ‚Üí –ò–º–ø–æ—Ä—Ç
```
‚ùå Preview —Ç—Ä–µ–∫–∏ (30 —Å–µ–∫)
‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–ª–Ω–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
‚ùå –ù–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ

### –°–µ–π—á–∞—Å (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
```
iTunes API (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ) ‚Üí –ü–æ–∏—Å–∫ –Ω–∞ Lmusic/VK ‚Üí –ü–æ–ª–Ω—ã–µ —Ç—Ä–µ–∫–∏
```
‚úÖ –ü–æ–ª–Ω—ã–µ —Ç—Ä–µ–∫–∏ (2-5 –º–∏–Ω—É—Ç)
‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª–Ω–æ–≥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
‚úÖ –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (—Å–µ–≥–æ–¥–Ω—è-–∑–∞–≤—Ç—Ä–∞):

1. **–ü–æ–¥–æ–∂–¥–∞—Ç—å —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ VK** (3-6 —á–∞—Å–æ–≤)
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å VK
   docker run --rm vk-token-getter "+79620093157" "FantumRaking2!"
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç —Å VK**
   ```bash
   docker cp "d:\–ú–û–ô –°–ê–ô–¢\backend\import-from-charts.js" errorparty_backend:/app/
   docker exec errorparty_backend node /app/import-from-charts.js
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ**
   ```bash
   docker exec errorparty_backend node /app/check-music-stats.js
   ```

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ (–Ω–∞ –Ω–µ–¥–µ–ª–µ):

4. **–û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã**
   - [ ] `backend/src/services/music-discovery.service.js`
   - [ ] `backend/src/services/smart-discovery.service.js`
   - [ ] –í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã `import-*.js`

5. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç**
   - [ ] –î–æ–±–∞–≤–∏—Ç—å cron –∑–∞–¥–∞—á—É (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 3:00)
   - [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `import-from-charts.js`

6. **–î–æ–±–∞–≤–∏—Ç—å –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫—É** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `pip3 install yandex-music`
   - [ ] –ü–æ–ª—É—á–∏—Ç—å OAuth —Ç–æ–∫–µ–Ω
   - [ ] –î–æ–±–∞–≤–∏—Ç—å –≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç #3

---

## üìã –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:
```bash
docker exec errorparty_backend node /app/check-music-stats.js
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å VK:
```bash
docker run --rm vk-token-getter "+79620093157" "FantumRaking2!"
```

### –ò–º–ø–æ—Ä—Ç —Å VK (–∫–æ–≥–¥–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É—é—Ç):
```bash
docker exec errorparty_backend node /app/import-from-charts.js
```

### –ò–º–ø–æ—Ä—Ç –±–µ–∑ VK (—Ç–æ–ª—å–∫–æ Lmusic):
```bash
docker exec errorparty_backend node /app/import-from-charts-no-vk.js
```

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ (–¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ —á–∞—Å—Ç–∏—á–Ω–æ)

- ‚úÖ –ù–µ—Ç preview —Ç—Ä–µ–∫–æ–≤ –≤ –±–∞–∑–µ
- ‚úÖ 78% —Ç—Ä–µ–∫–æ–≤ –∏–º–µ—é—Ç stream URL
- ‚úÖ –¢—Ä–µ–∫–∏ –º–æ–∂–Ω–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- ‚è≥ VK Music (–∂–¥–µ–º —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏)
- ‚è≥ –ü–æ–∫—Ä—ã—Ç–∏–µ 90%+ (–¥–æ—Å—Ç–∏–≥–Ω–µ–º –ø–æ—Å–ª–µ VK)

---

## üéâ –ò—Ç–æ–≥

**–ú–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!**

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞:
- iTunes –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¢–û–õ–¨–ö–û –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö ‚úÖ
- –ü–æ–ª–Ω—ã–µ —Ç—Ä–µ–∫–∏ –±–µ—Ä—É—Ç—Å—è –∏–∑ Lmusic.kz/VK ‚úÖ
- Preview URL –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è ‚úÖ
- 56 –ø–æ–ª–Ω—ã—Ö —Ç—Ä–µ–∫–æ–≤ –¥–æ–±–∞–≤–ª–µ–Ω–æ ‚úÖ

–ü–æ—Å–ª–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ VK (—á–µ—Ä–µ–∑ 3-6 —á–∞—Å–æ–≤) –º–æ–∂–Ω–æ –±—É–¥–µ—Ç:
- –£–≤–µ–ª–∏—á–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–æ 90%+
- –î–æ–±–∞–≤–∏—Ç—å –µ—â–µ 20-30 —Ç—Ä–µ–∫–æ–≤
- –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ä—É—Å—Å–∫–æ–π –º—É–∑—ã–∫–µ

**–í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–∞–¥–æ!** üéµ
