# üöÄ Quick Start - PWA + Push Notifications

## ‚ö° –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (5 –º–∏–Ω—É—Ç)

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
cd backend
npm install web-push
```

### 2. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ VAPID –∫–ª—é—á–∏
```bash
node generate-vapid-keys.js
```

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—ã–≤–æ–¥** –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ –≤–∞—à `.env` —Ñ–∞–π–ª:
```env
VAPID_PUBLIC_KEY=BBPNUUUkNlu...
VAPID_PRIVATE_KEY=rhuizwjerS-...
ADMIN_EMAIL=admin@errorparty.ru
```

### 3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –ë–î
```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Docker
docker-compose exec postgres psql -U errorparty -d errorparty

# –ó–∞—Ç–µ–º –≤ psql:
\i /migrations/add-push-subscription.sql
\q

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ù–∞–ø—Ä—è–º—É—é
docker-compose exec postgres psql -U errorparty -d errorparty -f /app/migrations/add-push-subscription.sql
```

### 4. –°–æ–∑–¥–∞–π—Ç–µ –∏–∫–æ–Ω–∫–∏ PWA

**–í–∞—Ä–∏–∞–Ω—Ç A: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å ImageMagick)**
```powershell
cd frontend/public
# –ü–æ–º–µ—Å—Ç–∏—Ç–µ –≤–∞—à–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞–∫ icon-source.png (512x512)
.\generate-icons.ps1
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –û–Ω–ª–∞–π–Ω**
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://realfavicongenerator.net/
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤–∞—à–µ –ª–æ–≥–æ (–º–∏–Ω–∏–º—É–º 512x512)
3. –°–∫–∞—á–∞–π—Ç–µ –∏ —Ä–∞—Å–ø–∞–∫—É–π—Ç–µ –≤ `frontend/public/icons/`

**–í–∞—Ä–∏–∞–Ω—Ç C: Placeholder (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)**
```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª—é–±–æ–µ –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
# –ü—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª—ã –Ω—É–∂–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤
# –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ: icon-192x192.png –∏ icon-512x512.png
```

### 5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
```bash
docker-compose down
docker-compose up -d --build
```

### 6. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ!

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç: `http://localhost:5173`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/notifications`
3. –ù–∞–∂–º–∏—Ç–µ "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å Service Worker"
4. –ù–∞–∂–º–∏—Ç–µ "–í–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
5. –†–∞–∑—Ä–µ—à–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ
6. –ù–∞–∂–º–∏—Ç–µ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ"

‚úÖ –ï—Å–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏—à–ª–æ - –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç!

---

## üéØ –ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
- ‚úÖ –ö–≤–µ—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω (–ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –Ω–∞–≥—Ä–∞–¥—ã)
- ‚úÖ –ù–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å (–ø—Ä–∏ –ø–æ–≤—ã—à–µ–Ω–∏–∏)
- ‚úÖ –õ–∞–π–∫ –º–µ–º–∞ (–∫–æ–≥–¥–∞ –∫—Ç–æ-—Ç–æ –ª–∞–π–∫–∞–µ—Ç –≤–∞—à –º–µ–º)
- ‚úÖ –ù–æ–≤—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–∫ –≤–∞—à–µ–º—É –º–µ–º—É)

### –ì–æ—Ç–æ–≤—ã–µ —Ç–∏–ø—ã (–±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–∑–∂–µ):
- üìÖ –ù–æ–≤—ã–π –º–∞—Ç—á
- üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ
- üë• –ó–∞—è–≤–∫–∞ –≤ –¥—Ä—É–∑—å—è
- üéÆ –¢—É—Ä–Ω–∏—Ä –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è
- ‚è∞ –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ

---

## üì± –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö

### Android (Chrome)
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç
2. –ú–µ–Ω—é ‚Üí "–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω"
3. –ü–æ—è–≤–∏—Ç—Å—è –∏–∫–æ–Ω–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–∑ –∏–∫–æ–Ω–∫–∏
5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### iOS (Safari 16.4+)
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –≤ Safari
2. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è"
3. "–ù–∞ —ç–∫—Ä–∞–Ω –î–æ–º–æ–π"
4. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Service Worker –Ω–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è
```javascript
// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
navigator.serviceWorker.getRegistration().then(reg => {
  console.log('SW:', reg);
});
```

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ VAPID –∫–ª—é—á–∏ –≤ `.env`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ subscription –≤ –ë–î:
   ```sql
   SELECT id, username, push_subscription FROM users 
   WHERE push_subscription IS NOT NULL;
   ```

### –ò–∫–æ–Ω–∫–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å: `frontend/public/icons/icon-192x192.png`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ manifest.json
3. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl+Shift+R)

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

### Backend –ª–æ–≥–∏
```bash
docker-compose logs -f backend | grep -i "push"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫ –≤ –ë–î
```sql
-- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –ë–î
docker-compose exec postgres psql -U errorparty -d errorparty

-- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–ø–∏—Å–∫–∏
SELECT COUNT(*) FROM users WHERE push_subscription IS NOT NULL;

-- –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä
SELECT id, username, LEFT(push_subscription, 50) 
FROM users 
WHERE push_subscription IS NOT NULL 
LIMIT 1;
```

### API —Ç–µ—Å—Ç
```bash
# –ü–æ–ª—É—á–∏—Ç—å VAPID public key
curl http://localhost:3001/api/notifications/vapid-public-key

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏ (–Ω—É–∂–µ–Ω —Ç–æ–∫–µ–Ω)
curl http://localhost:3001/api/notifications/status \
  -H "Authorization: Bearer YOUR_TOKEN"
```

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å —Ä–∞–±–æ—Ç–∞–µ—Ç:
- üì± PWA (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
- üîî Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- üéØ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –∫–≤–µ—Å—Ç–æ–≤ –∏ –º–µ–º–æ–≤

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:** –°–º. `IMPROVEMENT_ROADMAP.md` ‚Üí –§–∞–∑–∞ 1.2
