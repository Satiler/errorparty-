# üéµ –£–º–Ω–∞—è –°–∏—Å—Ç–µ–º–∞ –ò–º–ø–æ—Ä—Ç–∞ –ú—É–∑—ã–∫–∏ - –ì–æ—Ç–æ–≤–æ!

## ‚úÖ –ß—Ç–æ —Å–æ–∑–¥–∞–Ω–æ:

### 1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å iTunes RSS**
- –ò–º–ø–æ—Ä—Ç —Ç–æ–ø–æ–≤ –ø–æ —Å—Ç—Ä–∞–Ω–∞–º (US, GB, RU, DE)
- –ò–º–ø–æ—Ä—Ç –ø–æ –∂–∞–Ω—Ä–∞–º (pop, rock, rap, electronic, indie)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–∞—Ä—Ç–æ–≤

### 2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–∞**
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö —á–∞—Ä—Ç–æ–≤
- –ù–æ–≤—ã–µ –∞–ª—å–±–æ–º—ã
- –¢–æ–ø—ã –ø–æ –∂–∞–Ω—Ä–∞–º

### 3. **–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã**
- –ê–Ω–∞–ª–∏–∑ –ª–∞–π–∫–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ª—é–±–∏–º—ã—Ö –∂–∞–Ω—Ä–æ–≤ –∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–±–æ—Ä–æ–∫

### 4. **API Endpoints**
```
POST /api/music/discover/personal-playlist - –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–ª–µ–π–ª–∏—Å—Ç
GET  /api/music/discover/recommendations - –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
POST /api/music/discover/import-country - –ò–º–ø–æ—Ä—Ç –ø–æ —Å—Ç—Ä–∞–Ω–µ (admin)
POST /api/music/discover/import-genre - –ò–º–ø–æ—Ä—Ç –ø–æ –∂–∞–Ω—Ä—É (admin)
POST /api/music/discover/import-albums - –ò–º–ø–æ—Ä—Ç –∞–ª—å–±–æ–º–æ–≤ (admin)
```

### 5. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ (Cron)**
- **3:00** - –ò–º–ø–æ—Ä—Ç —Ç–æ–ø-—Ö–∏—Ç–æ–≤ iTunes
- **4:00** - –£–º–Ω—ã–π –∏–º–ø–æ—Ä—Ç (—Å—Ç—Ä–∞–Ω—ã + –∂–∞–Ω—Ä—ã)
- **5:00** - –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –∏–º–ø–æ—Ä—Ç–∞:
```bash
# –ü–æ–ª–Ω—ã–π —É–º–Ω—ã–π –∏–º–ø–æ—Ä—Ç
docker exec errorparty_backend node /app/smart-import-music.js

# –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã
docker exec errorparty_backend node /app/create-personal-playlists.js
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–∞:
```bash
docker exec errorparty_backend node /app/test-yandex.js
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–∞—Ä—Ç–æ–≤ –≤—Ä—É—á–Ω—É—é:
```bash
docker exec errorparty_backend node /app/direct-sql-update.js
```

---

## üìä –¢–µ–∫—É—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:

**–ü–æ—Å–ª–µ–¥–Ω–∏–π –∏–º–ø–æ—Ä—Ç:**
- –¢—Ä–µ–∫–∏: 0 –Ω–æ–≤—ã—Ö, 4 –æ–±–Ω–æ–≤–ª–µ–Ω–æ
- –ê–ª—å–±–æ–º—ã: 0 –Ω–æ–≤—ã—Ö
- –ò—Å—Ç–æ—á–Ω–∏–∫–∏: iTunes RSS, lmusic.kz, Musify

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–∞ —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ (React/SPA), –Ω–æ iTunes RSS —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ –∏ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –º–∏—Ä–æ–≤—ã–µ —á–∞—Ä—Ç—ã.

---

## üéØ –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø–ª–µ–π–ª–∏—Å—Ç–∞:

### –ß–µ—Ä–µ–∑ API:
```bash
curl -X POST https://errorparty.ru/api/music/discover/personal-playlist \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### –û—Ç–≤–µ—Ç:
```json
{
  "success": true,
  "playlist": {
    "playlistId": 123,
    "playlistName": "–ú–æ–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ 02.12.2025",
    "tracksCount": 30,
    "topGenres": ["Pop", "Rock"],
    "topArtists": ["Taylor Swift", "Imagine Dragons"]
  }
}
```

---

## üìù –§–∞–π–ª—ã —Å–∏—Å—Ç–µ–º—ã:

**–°–µ—Ä–≤–∏—Å—ã:**
- `backend/src/services/yandex-music.service.js` - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–∞
- `backend/src/services/smart-discovery.service.js` - –£–º–Ω—ã–π –ø–æ–¥–±–æ—Ä –º—É–∑—ã–∫–∏

**–°–∫—Ä–∏–ø—Ç—ã:**
- `backend/smart-import-music.js` - –ì–ª–∞–≤–Ω—ã–π –∏–º–ø–æ—Ä—Ç
- `backend/create-personal-playlists.js` - –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã
- `backend/setup-smart-import.js` - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ cron

**API:**
- `backend/src/routes/musicDiscovery.js` - REST API endpoints

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- `SMART_MUSIC_DISCOVERY.md` - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞:

–°–∏—Å—Ç–µ–º–∞ **—É–∂–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞** –≤ `server.js` –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±—ç–∫–µ–Ω–¥–∞.

**–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä:**
```bash
docker-compose restart backend
```

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç:
1. ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ø—ã –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 4:00
2. ‚úÖ –°–æ–∑–¥–∞–≤–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã –≤ 5:00
3. ‚úÖ –û–±–Ω–æ–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ iTunes RSS

---

## ‚ú® –ò—Ç–æ–≥:

‚úÖ –°–∏—Å—Ç–µ–º–∞ –∏–º–ø–æ—Ä—Ç–∞ –ø–æ —Å—Ç—Ä–∞–Ω–∞–º –∏ –∂–∞–Ω—Ä–∞–º  
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –Ω–æ–≤—ã—Ö –∞–ª—å–±–æ–º–æ–≤  
‚úÖ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –ª–∞–π–∫–æ–≤  
‚úÖ REST API –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞  
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ cron –∑–∞–¥–∞—á–∏  
‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å iTunes RSS (—Ä–∞–±–æ—Ç–∞–µ—Ç)  
‚ö†Ô∏è –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–∞ (—Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –ø–∞—Ä—Å–µ—Ä–∞)

**–í—Å—ë –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ
